<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demos - code-block Web Component</title>
  <meta name="description" content="Interactive examples and demos of the code-block web component">
  <link rel="stylesheet" href="styles.css">
  <script type="module" src="https://unpkg.com/@profpowell/code-block"></script>
</head>
<body>
  <header class="site-header">
    <nav>
      <a href="index.html" class="nav-brand">&lt;code-block&gt;</a>
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="demos.html" class="active">Demos</a>
        <a href="api.html">API</a>
        <a href="https://github.com/ProfPowell/code-block">GitHub</a>
        <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">ðŸŒ“</button>
      </div>
    </nav>
  </header>

  <main>
    <h1>Interactive Demos</h1>
    <p class="demo-description">Explore the full capabilities of the <code>&lt;code-block&gt;</code> component. Each demo shows the markup and the rendered result.</p>

    <!-- BASIC USAGE -->
    <section class="demo-section" id="basic-usage">
      <h2>Basic Usage</h2>
      <p class="demo-description">The simplest usage - just wrap your code in a <code>&lt;code-block&gt;</code> element with a language attribute.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;code-block language="javascript"&gt;
const greeting = "Hello, World!";
console.log(greeting);
&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <code-block language="javascript">
const greeting = "Hello, World!";
console.log(greeting);
      </code-block>
    </section>

    <!-- EXTERNAL FILE LOADING -->
    <section class="demo-section" id="external-loading">
      <h2>External File Loading</h2>
      <p class="demo-description">Load code from an external URL using the <code>src</code> attribute. The language and filename are auto-detected from the URL.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;!-- Load code from a URL - language auto-detected from extension --&gt;
&lt;code-block src="examples/greeting.js"&gt;&lt;/code-block&gt;

&lt;!-- Override auto-detected language --&gt;
&lt;code-block src="examples/greeting.js" language="typescript"&gt;&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <code-block src="examples/greeting.js" show-lines></code-block>

      <h3>Features</h3>
      <ul style="color: var(--text-secondary, #57606a); margin: 1rem 0; padding-left: 1.5rem;">
        <li><strong>Auto-detection:</strong> Language and filename are automatically detected from the URL</li>
        <li><strong>Loading state:</strong> Shows a spinner while fetching</li>
        <li><strong>Error handling:</strong> Displays error message with retry button if fetch fails</li>
        <li><strong>Events:</strong> Dispatches <code>code-loaded</code> and <code>code-load-error</code> events</li>
      </ul>

      <h3>Listening for Events</h3>
      <code-block language="javascript">const codeBlock = document.querySelector('code-block[src]');

codeBlock.addEventListener('code-loaded', (e) =&gt; {
  console.log('Loaded from:', e.detail.url);
  console.log('Code:', e.detail.code);
});

codeBlock.addEventListener('code-load-error', (e) =&gt; {
  console.error('Failed to load:', e.detail.url);
  console.error('Error:', e.detail.error);
});</code-block>
    </section>

    <!-- FILENAME -->
    <section class="demo-section">
      <h2>Filename Display</h2>
      <p class="demo-description">Add a <code>filename</code> attribute to show a filename in the header.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;code-block language="javascript" filename="app.js"&gt;
export function init() {
  console.log('App initialized');
}
&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <code-block language="javascript" filename="app.js">
export function init() {
  console.log('App initialized');
}
      </code-block>
    </section>

    <!-- LINE NUMBERS -->
    <section class="demo-section">
      <h2>Line Numbers</h2>
      <p class="demo-description">Add line numbers with the <code>show-lines</code> attribute.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;code-block language="javascript" show-lines filename="fibonacci.js"&gt;
function fibonacci(n) {
  if (n &lt;= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

for (let i = 0; i &lt; 10; i++) {
  console.log(`F(${i}) = ${fibonacci(i)}`);
}
&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <code-block language="javascript" show-lines filename="fibonacci.js">
function fibonacci(n) {
  if (n &lt;= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

for (let i = 0; i &lt; 10; i++) {
  console.log(`F(${i}) = ${fibonacci(i)}`);
}
      </code-block>
    </section>

    <!-- CUSTOM START LINE -->
    <section class="demo-section">
      <h2>Custom Starting Line</h2>
      <p class="demo-description">Use <code>start-line</code> to begin numbering from a specific line (useful for showing excerpts).</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;code-block language="javascript" show-lines start-line="42" filename="app.js:42-50"&gt;
// Continuing from line 42...
function handleSubmit(event) {
  event.preventDefault();
  const formData = new FormData(event.target);
  const data = Object.fromEntries(formData);
  submitToAPI(data);
}
&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <code-block language="javascript" show-lines start-line="42" filename="app.js:42-50">
// Continuing from line 42...
function handleSubmit(event) {
  event.preventDefault();
  const formData = new FormData(event.target);
  const data = Object.fromEntries(formData);
  submitToAPI(data);
}
      </code-block>
    </section>

    <!-- LINE HIGHLIGHTING -->
    <section class="demo-section" id="line-highlighting">
      <h2>Line Highlighting</h2>
      <p class="demo-description">Draw attention to specific lines with <code>highlight-lines</code>. Supports individual lines and ranges.</p>

      <h3>Single Lines</h3>
      <h4>Usage</h4>
      <code-block language="html">&lt;code-block language="javascript" show-lines highlight-lines="3,7"&gt;
async function fetchUser(id) {
  try {
    const response = await fetch(`/api/users/${id}`);
    if (!response.ok) {
      throw new Error('User not found');
    }
    return await response.json();
  } catch (error) {
    console.error('Failed:', error);
  }
}
&lt;/code-block&gt;</code-block>

      <h4>Result</h4>
      <code-block language="javascript" show-lines highlight-lines="3,7">
async function fetchUser(id) {
  try {
    const response = await fetch(`/api/users/${id}`);
    if (!response.ok) {
      throw new Error('User not found');
    }
    return await response.json();
  } catch (error) {
    console.error('Failed:', error);
  }
}
      </code-block>

      <h3>Line Ranges</h3>
      <h4>Usage</h4>
      <code-block language="html">&lt;code-block language="javascript" show-lines highlight-lines="2-4,9-11"&gt;
class Calculator {
  add(a, b) {
    return a + b;
  }

  subtract(a, b) {
    return a - b;
  }

  multiply(a, b) {
    return a * b;
  }
}
&lt;/code-block&gt;</code-block>

      <h4>Result</h4>
      <code-block language="javascript" show-lines highlight-lines="2-4,9-11">
class Calculator {
  add(a, b) {
    return a + b;
  }

  subtract(a, b) {
    return a - b;
  }

  multiply(a, b) {
    return a * b;
  }
}
      </code-block>
    </section>

    <!-- FOCUS MODE -->
    <section class="demo-section" id="focus-mode">
      <h2>Focus Mode</h2>
      <p class="demo-description">Combine <code>focus-mode</code> with <code>highlight-lines</code> to dim non-highlighted lines, drawing attention to specific code.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;code-block language="javascript" show-lines highlight-lines="3-5" focus-mode&gt;
async function fetchUser(id) {
  try {
    const response = await fetch(`/api/users/${id}`);
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Failed:', error);
    return null;
  }
}
&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <code-block language="javascript" show-lines highlight-lines="3-5" focus-mode>
async function fetchUser(id) {
  try {
    const response = await fetch(`/api/users/${id}`);
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Failed:', error);
    return null;
  }
}
      </code-block>

      <h3>Comparison: Without vs With Focus Mode</h3>
      <div class="side-by-side">
        <div>
          <p><strong>Without Focus Mode</strong></p>
          <code-block language="javascript" show-lines highlight-lines="2-4">
class Calculator {
  add(a, b) {
    return a + b;
  }

  subtract(a, b) {
    return a - b;
  }
}
          </code-block>
        </div>
        <div>
          <p><strong>With Focus Mode</strong></p>
          <code-block language="javascript" show-lines highlight-lines="2-4" focus-mode>
class Calculator {
  add(a, b) {
    return a + b;
  }

  subtract(a, b) {
    return a - b;
  }
}
          </code-block>
        </div>
      </div>

      <h3>Customizing Focus Intensity</h3>
      <p class="demo-description">Adjust the dimming with CSS custom properties:</p>
      <code-block language="css">/* Subtle dim */
.subtle-focus {
  --cb-focus-dim-opacity: 0.6;
  --cb-focus-blur: 0;
}

/* Heavy dim */
.heavy-focus {
  --cb-focus-dim-opacity: 0.2;
  --cb-focus-blur: 1px;
}</code-block>
    </section>

    <!-- MULTI-FILE TABS -->
    <section class="demo-section" id="multi-file-tabs">
      <h2>Multi-File Tabs</h2>
      <p class="demo-description">Group related files with <code>&lt;code-block-group&gt;</code> for a tabbed interface. Each child needs a <code>filename</code>.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;code-block-group&gt;
  &lt;code-block language="html" filename="index.html"&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;&lt;link rel="stylesheet" href="styles.css"&gt;&lt;/head&gt;
  &lt;body&gt;&lt;h1&gt;Hello&lt;/h1&gt;&lt;/body&gt;
&lt;/html&gt;
  &lt;/code-block&gt;
  &lt;code-block language="css" filename="styles.css"&gt;
body {
  font-family: system-ui, sans-serif;
  margin: 0;
  padding: 2rem;
}
  &lt;/code-block&gt;
&lt;/code-block-group&gt;</code-block>

      <h3>Result</h3>
      <code-block-group>
        <code-block language="html" filename="index.html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;&lt;link rel="stylesheet" href="styles.css"&gt;&lt;/head&gt;
  &lt;body&gt;&lt;h1&gt;Hello&lt;/h1&gt;&lt;/body&gt;
&lt;/html&gt;</code-block>
        <code-block language="css" filename="styles.css">body {
  font-family: system-ui, sans-serif;
  margin: 0;
  padding: 2rem;
}</code-block>
      </code-block-group>
    </section>

    <!-- COLLAPSIBLE -->
    <section class="demo-section">
      <h2>Collapsible Code</h2>
      <p class="demo-description">Long code blocks can be collapsed by default with the <code>collapsed</code> attribute. Click to expand.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;code-block language="javascript" collapsed filename="utils.js"&gt;
// This content is collapsed by default
export function chunk(array, size) {
  const chunks = [];
  for (let i = 0; i &lt; array.length; i += size) {
    chunks.push(array.slice(i, i + size));
  }
  return chunks;
}

export function unique(array) {
  return [...new Set(array)];
}
&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <code-block language="javascript" collapsed filename="utils.js">
// This content is collapsed by default
export function chunk(array, size) {
  const chunks = [];
  for (let i = 0; i &lt; array.length; i += size) {
    chunks.push(array.slice(i, i + size));
  }
  return chunks;
}

export function unique(array) {
  return [...new Set(array)];
}
      </code-block>
    </section>

    <!-- THEME SUPPORT -->
    <section class="demo-section" id="theme-support">
      <h2>Theme Support</h2>
      <p class="demo-description">Set a specific theme with the <code>theme</code> attribute. Values: <code>light</code>, <code>dark</code>, or <code>auto</code>.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;!-- Force light theme --&gt;
&lt;code-block language="javascript" theme="light"&gt;
const theme = 'light';
&lt;/code-block&gt;

&lt;!-- Force dark theme --&gt;
&lt;code-block language="javascript" theme="dark"&gt;
const theme = 'dark';
&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <div class="side-by-side">
        <div>
          <p><strong>Light Theme</strong></p>
          <code-block language="javascript" theme="light" filename="light.js">
const theme = 'light';
document.body.classList.add(theme);
          </code-block>
        </div>
        <div>
          <p><strong>Dark Theme</strong></p>
          <code-block language="javascript" theme="dark" filename="dark.js">
const theme = 'dark';
document.body.classList.add(theme);
          </code-block>
        </div>
      </div>
    </section>

    <!-- DIFF SUPPORT -->
    <section class="demo-section">
      <h2>Diff Support</h2>
      <p class="demo-description">Use <code>language="diff"</code> to show code changes. Lines with <code>+</code> are additions, <code>-</code> are removals.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;code-block language="diff" filename="changes.diff"&gt;
 function greet(name) {
-  console.log('Hello ' + name);
+  console.log(`Hello, ${name}!`);
 }

-greet('world');
+greet('World');
&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <code-block language="diff" filename="changes.diff">
 function greet(name) {
-  console.log('Hello ' + name);
+  console.log(`Hello, ${name}!`);
 }

-greet('world');
+greet('World');
      </code-block>
    </section>

    <!-- DOWNLOAD BUTTON -->
    <section class="demo-section" id="download-button">
      <h2>Download Button</h2>
      <p class="demo-description">Add the <code>show-download</code> attribute to show a download button. Uses the <code>filename</code> for the downloaded file.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;code-block language="javascript" filename="snippet.js" show-download&gt;
// Click the download button to save this file
export const config = {
  apiUrl: 'https://api.example.com',
  timeout: 5000
};
&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <code-block language="javascript" filename="snippet.js" show-download>
// Click the download button to save this file
export const config = {
  apiUrl: 'https://api.example.com',
  timeout: 5000
};
      </code-block>
    </section>

    <!-- NO COPY BUTTON -->
    <section class="demo-section">
      <h2>Hide Copy Button</h2>
      <p class="demo-description">Use <code>no-copy</code> to hide the copy button and prevent text selection.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;code-block language="javascript" no-copy&gt;
// This block has no copy button
const secret = 'hidden';
&lt;/code-block&gt;</code-block>

      <h3>Result</h3>
      <code-block language="javascript" no-copy>
// This block has no copy button
const secret = 'hidden';
      </code-block>
    </section>

    <!-- CUSTOM STYLING -->
    <section class="demo-section">
      <h2>Custom Styling</h2>
      <p class="demo-description">Customize appearance with CSS custom properties.</p>

      <h3>Usage</h3>
      <code-block language="html">&lt;style&gt;
  .ocean-theme {
    --cb-border-radius: 16px;
    --cb-header-bg: #1e3a5f;
    --cb-code-bg: #0f1c2e;
    --cb-text-color: #e0f0ff;
    --cb-keyword: #ff7eb6;
    --cb-string: #7ee787;
    --cb-function: #79c0ff;
  }
&lt;/style&gt;

&lt;code-block language="javascript" class="ocean-theme"&gt;
function hello() {
  return "Custom themed!";
}
&lt;/code-block&gt;</code-block>

      <style>
        .ocean-theme {
          --cb-border-radius: 16px;
          --cb-header-bg: #1e3a5f;
          --cb-code-bg: #0f1c2e;
          --cb-text-color: #e0f0ff;
          --cb-label-color: #7eb8ff;
          --cb-keyword: #ff7eb6;
          --cb-string: #7ee787;
          --cb-comment: #6e8898;
          --cb-function: #79c0ff;
          --cb-number: #f2cc60;
        }
      </style>

      <h3>Result</h3>
      <code-block language="javascript" class="ocean-theme" filename="custom.js">
// Custom ocean theme
function createGradient(colors) {
  const stops = colors.map((c, i) =>
    `${c} ${(i / (colors.length - 1)) * 100}%`
  );
  return `linear-gradient(90deg, ${stops.join(', ')})`;
}

const gradient = createGradient(['#ff0080', '#7928ca']);
console.log(gradient);
      </code-block>
    </section>

    <!-- LANGUAGE EXAMPLES -->
    <section class="demo-section" id="supported-languages">
      <h2>Supported Languages</h2>
      <p class="demo-description">Examples of syntax highlighting for various languages.</p>

      <h3>Python</h3>
      <code-block language="python" filename="example.py">
import asyncio
from dataclasses import dataclass
from typing import List, Optional

@dataclass
class DataRecord:
    id: int
    value: str
    metadata: Optional[dict] = None

async def process_records(records: List[DataRecord]) -> List[str]:
    """Process a list of records asynchronously."""
    tasks = [process_single(r) for r in records]
    return await asyncio.gather(*tasks)
      </code-block>

      <h3>TypeScript</h3>
      <code-block language="typescript" filename="types.ts">
interface User {
  id: string;
  name: string;
  email: string;
  roles: Role[];
}

type Role = 'admin' | 'editor' | 'viewer';

function hasPermission(user: User, role: Role): boolean {
  return user.roles.includes(role);
}
      </code-block>

      <h3>CSS</h3>
      <code-block language="css" filename="styles.css">
:root {
  --primary: #0969da;
  --background: #ffffff;
}

.card {
  background: var(--background);
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease;
}

.card:hover {
  transform: translateY(-2px);
}
      </code-block>

      <h3>YAML</h3>
      <code-block language="yaml" filename="config.yml">
name: CI Pipeline
on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: npm ci
      - run: npm test
      </code-block>

      <h3>Bash</h3>
      <code-block language="bash" filename="deploy.sh">
#!/bin/bash
set -e

echo "Building project..."
npm run build

echo "Running tests..."
npm test

echo "Deploying..."
rsync -avz dist/ server:/var/www/app/
      </code-block>
    </section>
  </main>

  <footer class="site-footer">
    <p>MIT License Â· <a href="https://github.com/ProfPowell/code-block">View on GitHub</a> Â· Powered by <a href="https://highlightjs.org/">highlight.js</a></p>
  </footer>

  <script>
    function toggleTheme() {
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      document.querySelectorAll('code-block:not([theme]), code-block-group:not([theme])').forEach(block => {
        block.setAttribute('theme', isDark ? 'dark' : 'light');
      });
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    }

    // Load saved theme
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark');
      document.querySelectorAll('code-block:not([theme]), code-block-group:not([theme])').forEach(block => {
        block.setAttribute('theme', 'dark');
      });
    }
  </script>
</body>
</html>
